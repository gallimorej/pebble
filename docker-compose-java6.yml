version: '3.8'

# Java 6 Testing Environment
# WARNING: For testing purposes only - contains security vulnerabilities

services:
  pebble-java6:
    build:
      context: .
      dockerfile: Dockerfile.java6
    container_name: pebble-java6-test
    ports:
      - "8080:8080"
    volumes:
      - pebble-java6-data:/opt/pebble-data
      - ./logs:/opt/tomcat/logs
    environment:
      - JAVA_OPTS=-Xmx512m -Xms256m
      - CATALINA_OPTS=-Dpebble.data=/opt/pebble-data
    networks:
      - pebble-java6-network
    labels:
      - "purpose=testing-only"
      - "java.version=6"
      - "security.risk=high"

volumes:
  pebble-java6-data:
    driver: local

networks:
  pebble-java6-network:
    driver: bridge
    internal: false  # Allow external access for testing