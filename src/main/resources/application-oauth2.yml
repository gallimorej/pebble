# OAuth 2.0 / OpenID Connect Configuration for Pebble Blog
# Copy this file to application.yml and replace placeholders with your actual credentials

spring:
  security:
    oauth2:
      client:
        registration:
          # Google OAuth 2.0 / OpenID Connect Configuration
          google:
            client-id: YOUR_GOOGLE_CLIENT_ID
            client-secret: YOUR_GOOGLE_CLIENT_SECRET
            scope:
              - openid
              - profile
              - email
            # Optional: Override redirect URI if needed
            # redirect-uri: "{baseUrl}/login/oauth2/code/{registrationId}"
            client-name: Google

          # GitHub OAuth 2.0 Configuration
          github:
            client-id: YOUR_GITHUB_CLIENT_ID
            client-secret: YOUR_GITHUB_CLIENT_SECRET
            scope:
              - read:user
              - user:email
            # Optional: Override redirect URI if needed
            # redirect-uri: "{baseUrl}/login/oauth2/code/{registrationId}"
            client-name: GitHub

# OAuth2 User Service Configuration
pebble:
  security:
    oauth2:
      # Enable automatic user registration for new OAuth2 users
      # If false, only existing users can login via OAuth2
      auto-register-users: true

      # Default role for auto-registered OAuth2 users
      # Must be one of: BLOG_READER, BLOG_CONTRIBUTOR, BLOG_PUBLISHER, BLOG_OWNER, BLOG_ADMIN
      default-role: BLOG_READER

# ----------------------------------------------------------------------------
# Setup Instructions:
# ----------------------------------------------------------------------------
#
# 1. GOOGLE OAUTH2 SETUP:
#    a. Go to https://console.cloud.google.com/
#    b. Create a new project or select existing one
#    c. Enable Google+ API
#    d. Create OAuth 2.0 credentials (OAuth client ID)
#    e. Add authorized redirect URI: http://localhost:8080/login/oauth2/code/google
#       (Replace with your production URL in production)
#    f. Copy Client ID and Client Secret to this file
#
# 2. GITHUB OAUTH2 SETUP:
#    a. Go to https://github.com/settings/developers
#    b. Click "New OAuth App"
#    c. Set Authorization callback URL: http://localhost:8080/login/oauth2/code/github
#       (Replace with your production URL in production)
#    d. Copy Client ID and Client Secret to this file
#
# 3. SECURITY CONSIDERATIONS:
#    - Never commit this file with real credentials to version control
#    - Use environment variables in production: ${GOOGLE_CLIENT_ID}
#    - Enable HTTPS in production for secure OAuth2 flow
#    - Regularly rotate OAuth2 client secrets
#    - Monitor OAuth2 login attempts for security
#
# 4. PRODUCTION DEPLOYMENT:
#    - Set environment variables:
#      export GOOGLE_CLIENT_ID=your_google_client_id
#      export GOOGLE_CLIENT_SECRET=your_google_client_secret
#      export GITHUB_CLIENT_ID=your_github_client_id
#      export GITHUB_CLIENT_SECRET=your_github_client_secret
#    - Or use Spring Cloud Config Server for centralized configuration
#    - Update redirect URIs to use your production domain with HTTPS
#
# 5. TESTING:
#    - Access login page: http://localhost:8080/loginPage.action
#    - Click "Login with Google" or "Login with GitHub"
#    - Complete OAuth2 flow with your provider
#    - Verify user is created with BLOG_READER role
#    - Admin can grant additional roles via Pebble admin interface
